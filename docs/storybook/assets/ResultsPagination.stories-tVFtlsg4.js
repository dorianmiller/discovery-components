import{j}from"./jsx-runtime-FsUICBgo.js";import{d as L}from"./index-777x7qAF.js";import{w as fe,F as he,o as xe,b as be,S as ve,D as Pe,a as Te}from"./chunk-WFFRPTHA-XxQL4zvM.js";import{D as ye,c as _e}from"./storybookUtils-P7YVKdto.js";import{R as o,r as b}from"./index-RfLt4OUa.js";import{c as we}from"./index-tUYgphcS.js";import{f as H}from"./formatMessage-wl7oTduw.js";import{P as i}from"./index-4QtD-hFu.js";import{_ as ce,I as ue,a as pe,u as Se,b as Ne,c as O,C as Re,d as Oe,s as W,B as Z}from"./Button-KibTbxDG.js";import{W as Ee,a as Ce}from"./bucket-29-VrKNGfP9.js";import"./callBound-4MCeDK1M.js";import"./pickBy-llkn_6s3.js";import"./isPlainObject-g73re4jY.js";import"./index-xck8ovCi.js";import"./preview-errors-Ix78kkVy.js";import"./debounce-eWC8LGMf.js";import"./v4-yQnnJER4.js";var ee,te,je=["children"],ze=["children"],Ie=o.forwardRef(function(t,a){var n=t.children,r=ce(t,je);return o.createElement(ue,pe({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:a},r),ee||(ee=o.createElement("path",{d:"M20 24L10 16 20 8z"})),n)}),ke=o.forwardRef(function(t,a){var n=t.children,r=ce(t,ze);return o.createElement(ue,pe({width:16,height:16,viewBox:"0 0 32 32",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",ref:a},r),te||(te=o.createElement("path",{d:"M12 8L22 16 12 24z"})),n)}),De=["className","id","inline","labelText","disabled","children","noLabel","iconDescription","hideLabel","invalid","invalidText","helperText","light","size","warn","warnText"];function Q(){return Q=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Q.apply(this,arguments)}function w(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function $e(e,t){if(e==null)return{};var a=Le(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Le(e,t){if(e==null)return{};var a={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(a[r]=e[r]);return a}var B=o.forwardRef(function(t,a){var n,r,s,v=t.className,y=t.id,g=t.inline,E=t.labelText,S=t.disabled,z=t.children,_=t.noLabel;t.iconDescription;var A=t.hideLabel,h=t.invalid,I=t.invalidText,N=t.helperText,d=t.light,k=t.size,P=t.warn,R=t.warnText,u=$e(t,De),l=Se(),D=Ne("enable-v11-release"),$=O((n={},w(n,"".concat(l,"--select"),!0),w(n,"".concat(l,"--select--inline"),g),w(n,"".concat(l,"--select--light"),d),w(n,"".concat(l,"--select--invalid"),h),w(n,"".concat(l,"--select--disabled"),S),w(n,"".concat(l,"--select--warning"),P),n),[D?null:v]),f=O("".concat(l,"--label"),(r={},w(r,"".concat(l,"--visually-hidden"),A),w(r,"".concat(l,"--label--disabled"),S),r)),p=O((s={},w(s,"".concat(l,"--select-input"),!0),w(s,"".concat(l,"--select-input--").concat(k),k),s)),m="".concat(y,"-error-msg"),T=function(){if(h)return I;if(P)return R}(),C=h||P?o.createElement("div",{className:"".concat(l,"--form-requirement"),id:m},T):null,q=O("".concat(l,"--form__helper-text"),w({},"".concat(l,"--form__helper-text--disabled"),S)),U=N?o.createElement("div",{className:q},N):null,F={};h&&(F["aria-describedby"]=m);var c=function(){return o.createElement(o.Fragment,null,o.createElement("select",Q({},u,F,{id:y,className:p,disabled:S||void 0,"aria-invalid":h||void 0,ref:a}),z),o.createElement(Re,{className:"".concat(l,"--select__arrow")}),h&&o.createElement(Ee,{className:"".concat(l,"--select__invalid-icon")}),!h&&P&&o.createElement(Ce,{className:"".concat(l,"--select__invalid-icon ").concat(l,"--select__invalid-icon--warning")}))}();return o.createElement("div",{className:D?O("".concat(l,"--form-item"),v):"".concat(l,"--form-item")},o.createElement("div",{className:$},!_&&o.createElement("label",{htmlFor:y,className:f},E),g&&o.createElement("div",{className:"".concat(l,"--select-input--inline__wrapper")},o.createElement("div",{className:"".concat(l,"--select-input__wrapper"),"data-invalid":h||null},c),C),!g&&o.createElement("div",{className:"".concat(l,"--select-input__wrapper"),"data-invalid":h||null},c),!g&&C?C:U))});B.displayName="Select";B.propTypes={children:i.node,className:i.string,defaultValue:i.any,disabled:i.bool,helperText:i.node,hideLabel:i.bool,iconDescription:Oe(i.string),id:i.string.isRequired,inline:i.bool,invalid:i.bool,invalidText:i.node,labelText:i.node,light:i.bool,noLabel:i.bool,onChange:i.func,size:i.oneOf(["sm","md","lg","xl"]),warn:i.bool,warnText:i.node};B.defaultProps={disabled:!1,labelText:"Select",inline:!1,invalid:!1,invalidText:"",helperText:"",light:!1};const Ae=B;var We=["className","value","disabled","hidden","text"];function V(){return V=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},V.apply(this,arguments)}function ae(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function Fe(e,t){if(e==null)return{};var a=Me(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Me(e,t){if(e==null)return{};var a={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(a[r]=e[r]);return a}var Be=W.prefix,X=function(t){var a,n=t.className,r=t.value,s=t.disabled,v=t.hidden,y=t.text,g=Fe(t,We),E=O((a={},ae(a,"".concat(Be,"--select-option"),!0),ae(a,n,n),a));return o.createElement("option",V({},g,{className:E,value:r,disabled:s,hidden:v}),y)};X.propTypes={className:i.string,disabled:i.bool,hidden:i.bool,text:i.string.isRequired,value:i.any.isRequired};X.defaultProps={disabled:!1,hidden:!1,value:"",text:""};const qe=X;var Ue=["backwardText","children","className","disabled","forwardText","id","initialPage","itemsPerPageText","itemRangeText","itemText","onChange","pageRangeText","pageSize","pageSizes","pageText","pagesUnknown","totalItems"];function G(){return G=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},G.apply(this,arguments)}function ne(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function re(e,t){return Ge(e)||Ve(e,t)||Qe(e,t)||He()}function He(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qe(e,t){if(e){if(typeof e=="string")return ie(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return ie(e,t)}}function ie(e,t){(t==null||t>e.length)&&(t=e.length);for(var a=0,n=new Array(t);a<t;a++)n[a]=e[a];return n}function Ve(e,t){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var n=[],r=!0,s=!1,v,y;try{for(a=a.call(e);!(r=(v=a.next()).done)&&(n.push(v.value),!(t&&n.length===t));r=!0);}catch(g){s=!0,y=g}finally{try{!r&&a.return!=null&&a.return()}finally{if(s)throw y}}return n}}function Ge(e){if(Array.isArray(e))return e}function Je(e,t){if(e==null)return{};var a=Ke(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}function Ke(e,t){if(e==null)return{};var a={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(a[r]=e[r]);return a}var Xe=W.prefix;function Y(e){var t=e.backwardText,a=e.children,n=e.className,r=e.disabled,s=e.forwardText,v=e.id,y=e.initialPage,g=e.itemsPerPageText,E=e.itemRangeText,S=e.itemText,z=e.onChange,_=e.pageRangeText,A=e.pageSize,h=e.pageSizes,I=e.pageText,N=e.pagesUnknown,d=e.totalItems,k=Je(e,Ue),P=b.useState(y),R=re(P,2),u=R[0],l=R[1],D=b.useState(A),$=re(D,2),f=$[0],p=$[1],m=d?Math.max(Math.ceil(d/f),1):void 0,T=r||u===1,C=r||u===m;function q(x){l(Number(x))}function U(){var x=u+1;l(x),z({page:x,pageSize:f})}function F(){var x=u-1;l(x),z({page:x,pageSize:f})}var c="".concat(Xe,"--unstable-pagination");return o.createElement("section",G({className:O(c,n)},k),o.createElement("div",{className:"".concat(c,"__left")},h&&o.createElement(o.Fragment,null,o.createElement("label",{id:"".concat(c,"__page-sizer__counter-").concat(v),className:"".concat(c,"__text"),htmlFor:"".concat(c,"__page-sizer__input-").concat(v)},g),o.createElement(Ae,{id:"".concat(c,"__page-sizer__input-").concat(v),className:"".concat(c,"__page-sizer"),labelText:"",hideLabel:!0,noLabel:!0,inline:!0,onChange:function(ge){return p(Number(ge.target.value))},value:f},h.map(function(x){return o.createElement(qe,{key:x,value:x,text:String(x)})}))),o.createElement("span",{className:"".concat(c,"__text")},d&&!N&&E(Math.min(f*(u-1)+1,d),Math.min(u*f,d),d),d&&N&&S(f*(u-1)+1,u*f),!d&&S(f*(u-1)+1,u*f))),o.createElement("div",{className:"".concat(c,"__right")},a&&d&&a({currentPage:u,currentPageSize:f,onSetPage:q,totalPages:m}),a&&d&&!N&&o.createElement("span",{className:"".concat(c,"__text")},_("",m)),a&&!d&&o.createElement("span",{className:"".concat(c,"__text")},I(u)),!a&&o.createElement("span",{className:"".concat(c,"__text")},d?_(u,m):I(u)),o.createElement(Z,{className:O("".concat(c,"__button"),"".concat(c,"__button--backward"),ne({},"".concat(c,"__button--no-index"),T)),onClick:function(){return F()},disabled:T,hasIconOnly:!0,renderIcon:Ie,tooltipAlignment:"center",tooltipPosition:"top",iconDescription:t}),o.createElement(Z,{className:O("".concat(c,"__button"),"".concat(c,"__button--forward"),ne({},"".concat(c,"__button--no-index"),C)),onClick:function(){return U()},disabled:C,hasIconOnly:!0,renderIcon:ke,tooltipAlignment:"center",tooltipPosition:"top",iconDescription:s})))}Y.propTypes={backwardText:i.string,children:i.oneOfType([i.node,i.func]),className:i.string,disabled:i.bool,forwardText:i.string,id:i.oneOfType([i.string,i.number]),initialPage:i.number,itemRangeText:i.func,itemText:i.func,itemsPerPageText:i.string,onChange:i.func,pageRangeText:i.func,pageSize:i.number,pageSizes:i.arrayOf(i.number),pageText:i.func,pagesUnknown:i.bool,totalItems:i.number};Y.defaultProps={backwardText:"Previous page",className:null,children:void 0,disabled:!1,forwardText:"Next page",id:1,itemsPerPageText:"Items per page:",itemRangeText:function(t,a,n){return"".concat(t,"–").concat(a," of ").concat(n," items")},itemText:function(t,a){return"".concat(t,"–").concat(a," items")},initialPage:1,pageRangeText:function(t,a){return"".concat(t," of ").concat(a," pages")},pageSize:10,pageSizes:void 0,pageText:function(t){return"page ".concat(t)},pagesUnknown:!1,totalItems:void 0};const de={matching_results:20967,retrieval_details:{},results:[]},J={itemRangeText:"{min}–{max} of {total} results",itemsPerPageText:"Items per page:",pageRangeText:"of {total} pages",pageText:"Page {page}"},K=({page:e=1,pageSizes:t=[10,20,30,40,50],pageSize:a,showPageSizeSelector:n=!0,messages:r=J,onChange:s,apiRef:v,...y})=>{const g={...J,...r},{performSearch:E,setSearchParameters:S}=b.useContext(be),{searchResponseStore:{data:z,parameters:_},componentSettings:A,isResultsPaginationComponentHidden:h}=b.useContext(ve),[I,N]=b.useState(e),[d,k]=b.useState(0),P=a||_.count||10,R=b.useCallback(p=>{s&&s(p);const{page:m,pageSize:T}=p,C=(m-1)*T;N(m),E({..._,count:T,offset:C},!1)},[s,E,_]),u=b.useCallback(({triggerOnChange:p})=>{N(1),k(d+1),p&&R({page:1,pageSize:P})},[R,d,P]);b.useImperativeHandle(v,()=>({reset:u})),b.useEffect(()=>{(a||P)&&S(p=>({...p,count:a||P}))},[S,a,P]),b.useEffect(()=>{const p=_.count||10,m=_.offset||0,T=Math.floor(m/p)+1;I!==T&&(N(T),T===1&&u({}))},[I,_.count,_.offset,u]);const l=z&&z.matching_results||void 0,D=(p,m,T)=>H(g.itemRangeText,{min:p,max:m,total:T},!1),$=(p,m)=>H(g.pageRangeText,{total:m},!1),f=p=>H(g.pageText,{page:p},!1);return A?j.jsx(j.Fragment,{children:!h&&j.jsx(Y,{className:we(`${W.prefix}--pagination`,{[`${W.prefix}--pagination__page-size-selector--hidden`]:!n}),totalItems:l,pageSize:P,pageSizes:t,onChange:R,itemRangeText:D,itemsPerPageText:g.itemsPerPageText,pageRangeText:$,pageText:f,...y,children:p=>j.jsx(Ye,{...p,onChange:R})},d)}):null};function Ye({currentPage:e,currentPageSize:t,onSetPage:a,onChange:n}){const[r,s]=b.useState(t);return b.useEffect(()=>{t!==r&&(s(t),n({page:1,pageSize:t}),a(1))},[t,n,a,r]),j.jsx("span",{className:`${W.prefix}--unstable-pagination__text`,"data-testid":"current-page",children:e})}const Ze=fe(K,he("ResultsPagination"),xe),me=b.forwardRef((e,t)=>j.jsx(Ze,{...e,apiRef:t}));try{K.displayName="ResultsPagination",K.__docgenInfo={description:"",displayName:"ResultsPagination",props:{}}}catch{}const et=()=>({page:L.number("The current page (page)",1),pageSize:L.number("Number of items per page (pageSize)",10),pageSizes:L.array("Page size choices (pageSizes)",["10","20","30","40","50"]).map(e=>parseInt(e,10)),showPageSizeSelector:L.boolean("Show selector for dynamically changing `pageSize` (showPageSizeSelector)",!0),messages:L.object("Default messages for the component's text strings",J)});class tt extends ye{query(t){return Te("query")(t),_e(de)}}const at=()=>({searchClient:new tt,projectId:L.text("Project ID","project-id"),overrideSearchResults:de}),Pt={title:"ResultsPagination",parameters:{component:me},excludeStories:["props"]},M={render:()=>j.jsx(Pe,{...at(),children:j.jsx(me,{...et()})}),name:"default"};var se,oe,le;M.parameters={...M.parameters,docs:{...(se=M.parameters)==null?void 0:se.docs,source:{originalSource:`{
  render: () => {
    return <DiscoverySearch {...discoverySearchProps()}>
        <ResultsPagination {...props()} />
      </DiscoverySearch>;
  },
  name: 'default'
}`,...(le=(oe=M.parameters)==null?void 0:oe.docs)==null?void 0:le.source}}};const Tt=["props","Default"];export{M as Default,Tt as __namedExportsOrder,Pt as default,et as props};
